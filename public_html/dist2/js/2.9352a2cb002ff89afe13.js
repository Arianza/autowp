webpackJsonp([2],{14:function(e,a,t){var s=t(1),o=t(4);e.exports={showDialog:function(e,a,n,l){var d=this,i=s(t(55)),c=i.find("form"),r=c.find(".btn-primary").button(),p=c.find(".cancel").button(),m=c.find("textarea");i.find(".modal-title").text(o.t("personal-message-dialog/title")),r.attr("data-loading-text",o.t("personal-message-dialog/sending")),r.attr("data-complete-text",o.t("personal-message-dialog/sent")),r.attr("data-send-text",o.t("personal-message-dialog/send")),r.text(o.t("personal-message-dialog/send")),p.text(o.t("personal-message-dialog/cancel")),m.attr("placeholder",o.t("personal-message-dialog/placeholder")),a&&m.val(a),i.modal({show:!0}),i.on("hidden.bs.modal",function(){i.remove(),l&&l()}),i.on("shown.bs.modal",function(){m.focus()}),m.bind("change keyup click",function(){m.parent().removeClass("error"),r.text(o.t("personal-message-dialog/send")).removeClass("btn-success").prop("disabled",s(this).val().length<=0)}).triggerHandler("change"),c.find("button.cancel, a.close").on("click",function(e){e.preventDefault(),i.modal("hide")}),c.submit(function(a){a.preventDefault();var t=m.val();t.length<=0?m.parent().addClass("error"):(r.button("loading"),p.prop("disabled",1),m.prop("disabled",1),d.sendMessage(e,t,function(){m.val(""),r.button("reset").button("complete").addClass("btn-success disabled").prop("disabled",1),m.prop("disabled",0),p.prop("disabled",0),n&&n()}))})},sendMessage:function(e,a,t){s.post("/account/send-personal-message",{user_id:e,message:a},function(){t&&t()},"json")},deleteMessage:function(e,a){s.post("/account/delete-personal-message",{id:e},function(){a&&a()})}}},55:function(e,a){e.exports='<div class="modal fade"> <div class=modal-dialog> <form action=/account/send-personal-message class=modal-content method=post> <div class=modal-header> <a class=close>Ã—</a> <h3 class=modal-title></h3> </div> <div class=modal-body> <textarea cols=65 rows=5 name=contents class=form-control></textarea> </div> <div class=modal-footer> <button class="btn btn-primary"></button> <button class="btn btn-default cancel"></button> </div> </form> </div> </div>'}});